# 分布式锁

### reference
- [X] [分布式锁这样回答，面试应该稳了。](https://zhuanlan.zhihu.com/p/357049487)
    - redis 单机锁
    - redis 集群
    - redlock 部署单数个集群，大于一半及加锁成功，小于一半则失败，需要依次删除每个节点的锁信息。
      > 比较复杂，依次删除也是有些成本，再加上 redis 在分布式领域CAP 中偏AP，所以用它来做分布式锁，确实不算最合适。
    - zookeeper 分布式锁
      > 临时有序节点，比较是不是最小的，是最小的则获取，不是则获取失败。
      此时还需要监听(watch)比它小的一个节点，这样当比它小的节点失效后，
      它能及时获得通知，然后在重新检查自己是否当前子节点中最小的。
      其实这种方式相当于一个分布式队列的形式实现的公平锁。
      由于zk本身可以保证一致性，可用性也只会在zk选举的时候少量时间不可用，
      是大部分业务可以接受的。所以我一般推荐分布式锁使用zk来实现。
- [ ] [redis分布式锁和lua脚本](https://www.cnblogs.com/number7/p/8320259.html)
- [ ] [Lua脚本在redis分布式锁场景的运用](https://www.cnblogs.com/demingblog/p/9542124.html)


