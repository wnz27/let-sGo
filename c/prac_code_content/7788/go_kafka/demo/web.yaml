apiVersion: apps/v1
kind: Deployment
metadata:
  name: hello-display
spec:
  replicas: 1
  selector:
    matchLabels: &labels
      app: hello-display
  template:
    metadata:
      labels: *labels
    spec:
      containers:
      - name: event-display
        image: wnz27/web_demo:v1

---

# Service pointing at the previous Deployment. This will be the target for event
# consumption.
  kind: Service
  apiVersion: v1
  metadata:
    name: hello-display
  spec:
    selector:
      app: hello-display
    ports:
    - protocol: TCP
      port: 80
      targetPort: 8080
--- 
# virtual service
# See more at https://istio.io/docs/reference/config/networking/virtual-service/
apiVersion: networking.istio.io/v1alpha3
kind: VirtualService
metadata:
  name: hello-vs
spec:
  gateways: 
  - istio-system/istio-gateway-external
  hosts:
    - hello-event.newtest.k8s.guanmai.cn
  http:	 
  - match:	
    - uri:	
        prefix: /	
    route:
    - destination:
        host: hello-display
        port: 
          number: 80

