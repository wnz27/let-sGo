# 通道传输

## 示例：Telnet回音服务器——TCP服务器的基本结构

Telnet协议是TCP/IP协议族中的一种。
它允许用户(Telnet客户端)通过一个协商过程与一个远程设备进行通信。

本例将使用一部分Telnet协议与服务器进行通信。

服务器的网络库为了完整展示自己的代码实现了完整的收发过程，一般比较倾向于使用发送任意包返回原数据的逻辑。
这个过程类似于对着大山高喊，大山把你的声音原样返回的过程。也就是回音（Echo）。

本节使用Go语言中的Socket、goroutine和通道编写一个简单的Telnet协议的回音服务器。

回音服务器的代码分为4个部分，分别是:
1. 接受连接 
2. 会话处理
3. Telnet命令处理
4. 程序入口

#### 1．接受连接
回音服务器能同时服务于多个连接。要接受连接就需要先创建侦听器，侦听器需要一个侦听地址和协议类型。
- 主机IP：一般为一个IP地址或者域名，127.0.0.1表示本机地址。
- 端口号：16位无符号整型值，一共有65536个有效端口号。 
> 通过地址和协议名创建侦听器后，可以使用侦听器响应客户端连接。
响应连接是一个不断循环的过程，就像到银行办理业务时，一般是排队处理，前一个人办理完后，轮到下一个人办理。
![](../img/socket_handle.png)
> **Go语言中可以根据实际会话数量创建多个goroutine，并自动的调度它们的处理。**

telnet 服务器处理:
```

``` 